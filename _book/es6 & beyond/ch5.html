
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Chapter 5: Collections Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="ch6.html" />
    
    
    <link rel="prev" href="ch4.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../preface.html">
            
                <a href="../preface.html">
            
                    
                    Preface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../up & going/toc.html">
            
                <a href="../up & going/toc.html">
            
                    
                    Up & Going
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../up & going/foreword.html">
            
                <a href="../up & going/foreword.html">
            
                    
                    Foreword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../up & going/ch1.html">
            
                <a href="../up & going/ch1.html">
            
                    
                    Chapter 1: Into Programming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../up & going/ch2.html">
            
                <a href="../up & going/ch2.html">
            
                    
                    Chapter 2: Into JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../up & going/ch3.html">
            
                <a href="../up & going/ch3.html">
            
                    
                    Chapter 3: Into YDKJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../up & going/apA.html">
            
                <a href="../up & going/apA.html">
            
                    
                    Appendix A: Thank You's!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../Scope & Closures/toc.html">
            
                <a href="../Scope & Closures/toc.html">
            
                    
                    Scope & Closures
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../Scope & Closures/ch1.html">
            
                <a href="../Scope & Closures/ch1.html">
            
                    
                    Chapter 1: What is Scope?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../Scope & Closures/ch2.html">
            
                <a href="../Scope & Closures/ch2.html">
            
                    
                    Chapter 2: Lexical Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../Scope & Closures/ch3.html">
            
                <a href="../Scope & Closures/ch3.html">
            
                    
                    Chapter 3: Function vs. Block Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../Scope & Closures/ch4.html">
            
                <a href="../Scope & Closures/ch4.html">
            
                    
                    Chapter 4: Hoisting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../Scope & Closures/ch5.html">
            
                <a href="../Scope & Closures/ch5.html">
            
                    
                    Chapter 5: Scope Closures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../Scope & Closures/apA.html">
            
                <a href="../Scope & Closures/apA.html">
            
                    
                    Appendix A: Dynamic Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../Scope & Closures/apB.html">
            
                <a href="../Scope & Closures/apB.html">
            
                    
                    Appendix B: Polyfilling Block Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../Scope & Closures/apC.html">
            
                <a href="../Scope & Closures/apC.html">
            
                    
                    Appendix C: Lexical-this
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../Scope & Closures/apD.html">
            
                <a href="../Scope & Closures/apD.html">
            
                    
                    Appendix D: Thank You's!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../this & Object Prototypes/toc.html">
            
                <a href="../this & Object Prototypes/toc.html">
            
                    
                    this & Object Prototypes
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../this & Object Prototypes/foreword.html">
            
                <a href="../this & Object Prototypes/foreword.html">
            
                    
                    Foreword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../this & Object Prototypes/ch1.html">
            
                <a href="../this & Object Prototypes/ch1.html">
            
                    
                    Chapter 1: this Or That?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../this & Object Prototypes/ch2.html">
            
                <a href="../this & Object Prototypes/ch2.html">
            
                    
                    Chapter 2: this All Makes Sense Now!
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../this & Object Prototypes/ch3.html">
            
                <a href="../this & Object Prototypes/ch3.html">
            
                    
                    Chapter 3: Objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../this & Object Prototypes/ch4.html">
            
                <a href="../this & Object Prototypes/ch4.html">
            
                    
                    Chapter 4: Mixing (Up) "Class" Objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../this & Object Prototypes/ch5.html">
            
                <a href="../this & Object Prototypes/ch5.html">
            
                    
                    Chapter 5: Prototypes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../this & Object Prototypes/ch6.html">
            
                <a href="../this & Object Prototypes/ch6.html">
            
                    
                    Chapter 6: Behavior Delegation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../this & Object Prototypes/apA.html">
            
                <a href="../this & Object Prototypes/apA.html">
            
                    
                    Appendix A: ES6 class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../this & Object Prototypes/apB.html">
            
                <a href="../this & Object Prototypes/apB.html">
            
                    
                    Appendix B: Thank You's!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../Types & Grammar/toc.html">
            
                <a href="../Types & Grammar/toc.html">
            
                    
                    Types & Grammar
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../Types & Grammar/foreword.html">
            
                <a href="../Types & Grammar/foreword.html">
            
                    
                    Foreword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../Types & Grammar/ch1.html">
            
                <a href="../Types & Grammar/ch1.html">
            
                    
                    Chapter 1: Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../Types & Grammar/ch2.html">
            
                <a href="../Types & Grammar/ch2.html">
            
                    
                    Chapter 2: Values
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../Types & Grammar/ch3.html">
            
                <a href="../Types & Grammar/ch3.html">
            
                    
                    Chapter 3: Natives
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../Types & Grammar/ch4.html">
            
                <a href="../Types & Grammar/ch4.html">
            
                    
                    Chapter 4: Coercion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../Types & Grammar/ch5.html">
            
                <a href="../Types & Grammar/ch5.html">
            
                    
                    Chapter 5: Grammar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../Types & Grammar/apA.html">
            
                <a href="../Types & Grammar/apA.html">
            
                    
                    Appendix A: Mixed Environment JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../Types & Grammar/apB.html">
            
                <a href="../Types & Grammar/apB.html">
            
                    
                    Appendix B: Thank You's!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../Async & Performance/toc.html">
            
                <a href="../Async & Performance/toc.html">
            
                    
                    Async & Performance
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../Async & Performance/foreword.html">
            
                <a href="../Async & Performance/foreword.html">
            
                    
                    Foreword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../Async & Performance/ch1.html">
            
                <a href="../Async & Performance/ch1.html">
            
                    
                    Chapter 1: Asynchrony: Now & Later
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../Async & Performance/ch2.html">
            
                <a href="../Async & Performance/ch2.html">
            
                    
                    Chapter 2: Callbacks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../Async & Performance/ch3.html">
            
                <a href="../Async & Performance/ch3.html">
            
                    
                    Chapter 3: Promises
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../Async & Performance/ch4.html">
            
                <a href="../Async & Performance/ch4.html">
            
                    
                    Chapter 4: Generators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../Async & Performance/ch5.html">
            
                <a href="../Async & Performance/ch5.html">
            
                    
                    Chapter 5: Program Performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../Async & Performance/ch6.html">
            
                <a href="../Async & Performance/ch6.html">
            
                    
                    Chapter 6: Benchmarking & Tuning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="../Async & Performance/apA.html">
            
                <a href="../Async & Performance/apA.html">
            
                    
                    Appendix A: Library: asynquence
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="../Async & Performance/apB.html">
            
                <a href="../Async & Performance/apB.html">
            
                    
                    Appendix B: Advanced Async Patterns
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.10" data-path="../Async & Performance/apC.html">
            
                <a href="../Async & Performance/apC.html">
            
                    
                    Appendix C: Thank You's!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="toc.html">
            
                <a href="toc.html">
            
                    
                    ES6 & Beyond
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="foreword.html">
            
                <a href="foreword.html">
            
                    
                    Foreword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="ch1.html">
            
                <a href="ch1.html">
            
                    
                    Chapter 1: ES? Now & Future
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="ch2.html">
            
                <a href="ch2.html">
            
                    
                    Chapter 2: Syntax
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="ch3.html">
            
                <a href="ch3.html">
            
                    
                    Chapter 3: Organization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="ch4.html">
            
                <a href="ch4.html">
            
                    
                    Chapter 4: Async Flow Control
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.8.6" data-path="ch5.html">
            
                <a href="ch5.html">
            
                    
                    Chapter 5: Collections
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="ch6.html">
            
                <a href="ch6.html">
            
                    
                    Chapter 6: API Additions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="ch7.html">
            
                <a href="ch7.html">
            
                    
                    Chapter 7: Meta Programming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="ch8.html">
            
                <a href="ch8.html">
            
                    
                    Chapter 8: Beyond ES6
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="apA.html">
            
                <a href="apA.html">
            
                    
                    Appendix A: Thank You's!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Chapter 5: Collections</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#you-dont-know-js-es6--beyond"><b>1. </b>You Don&apos;t Know JS: ES6 &amp; Beyond</a></li><li><span class="title-icon "></span><a href="#chapter-5-collections"><b>2. </b>Chapter 5: Collections</a></li><ul><li><span class="title-icon "></span><a href="#typedarrays"><b>2.1. </b>TypedArrays</a></li><ul><li><span class="title-icon "></span><a href="#endianness"><b>2.1.1. </b>Endianness</a></li><li><span class="title-icon "></span><a href="#multiple-views"><b>2.1.2. </b>Multiple Views</a></li><li><span class="title-icon "></span><a href="#typedarray-constructors"><b>2.1.3. </b>TypedArray Constructors</a></li></ul><li><span class="title-icon "></span><a href="#maps"><b>2.2. </b>Maps</a></li><ul><li><span class="title-icon "></span><a href="#map-values"><b>2.2.1. </b>Map Values</a></li><li><span class="title-icon "></span><a href="#map-keys"><b>2.2.2. </b>Map Keys</a></li></ul><li><span class="title-icon "></span><a href="#weakmaps"><b>2.3. </b>WeakMaps</a></li><li><span class="title-icon "></span><a href="#sets"><b>2.4. </b>Sets</a></li><ul><li><span class="title-icon "></span><a href="#set-iterators"><b>2.4.1. </b>Set Iterators</a></li></ul><li><span class="title-icon "></span><a href="#weaksets"><b>2.5. </b>WeakSets</a></li><li><span class="title-icon "></span><a href="#review"><b>2.6. </b>Review</a></li></ul></ul></div><a href="#you-dont-know-js-es6--beyond" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="you-dont-know-js-es6--beyond"><a name="you-dont-know-js-es6--beyond" class="anchor-navigation-ex-anchor" href="#you-dont-know-js-es6--beyond"><i class="fa fa-link" aria-hidden="true"></i></a>1. You Don&apos;t Know JS: ES6 &amp; Beyond</h1>
<h1 id="chapter-5-collections"><a name="chapter-5-collections" class="anchor-navigation-ex-anchor" href="#chapter-5-collections"><i class="fa fa-link" aria-hidden="true"></i></a>2. Chapter 5: Collections</h1>
<p>Structured collection and access to data is a critical component of just about any JS program. From the beginning of the language up to this point, the array and the object have been our primary mechanism for creating data structures. Of course, many higher-level data structures have been built on top of these, as user-land libraries.</p>
<p>As of ES6, some of the most useful (and performance-optimizing!) data structure abstractions have been added as native components of the language.</p>
<p>We&apos;ll start this chapter first by looking at <em>TypedArrays</em>, technically contemporary to ES5 efforts several years ago, but only standardized as companions to WebGL and not JavaScript itself. As of ES6, these have been adopted directly by the language specification, which gives them first-class status.</p>
<p>Maps are like objects (key/value pairs), but instead of just a string for the key, you can use any value -- even another object or map! Sets are similar to arrays (lists of values), but the values are unique; if you add a duplicate, it&apos;s ignored. There are also weak (in relation to memory/garbage collection) counterparts: WeakMap and WeakSet.</p>
<h2 id="typedarrays"><a name="typedarrays" class="anchor-navigation-ex-anchor" href="#typedarrays"><i class="fa fa-link" aria-hidden="true"></i></a>2.1. TypedArrays</h2>
<p>As we cover in the <em>Types &amp; Grammar</em> title of this series, JS does have a set of built-in types, like <code>number</code> and <code>string</code>. It&apos;d be tempting to look at a feature named &quot;typed array&quot; and assume it means an array of a specific type of values, like an array of only strings.</p>
<p>However, typed arrays are really more about providing structured access to binary data using array-like semantics (indexed access, etc.). The &quot;type&quot; in the name refers to a &quot;view&quot; layered on type of the bucket of bits, which is essentially a mapping of whether the bits should be viewed as an array of 8-bit signed integers, 16-bit signed integers, and so on.</p>
<p>How do you construct such a bit-bucket? It&apos;s called a &quot;buffer,&quot; and you construct it most directly with the <code>ArrayBuffer(..)</code> constructor:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span> <span class="token number">32</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
buf<span class="token punctuation">.</span>byteLength<span class="token punctuation">;</span>                            <span class="token comment">// 32</span>
</code></pre>
<p><code>buf</code> is now a binary buffer that is 32-bytes long (256-bits), that&apos;s pre-initialized to all <code>0</code>s. A buffer by itself doesn&apos;t really allow you any interaction except for checking its <code>byteLength</code> property.</p>
<p><strong>Tip:</strong> Several web platform features use or return array buffers, such as <code>FileReader#readAsArrayBuffer(..)</code>, <code>XMLHttpRequest#send(..)</code>, and <code>ImageData</code> (canvas data).</p>
<p>But on top of this array buffer, you can then layer a &quot;view,&quot; which comes in the form of a typed array. Consider:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint16Array</span><span class="token punctuation">(</span> buf <span class="token punctuation">)</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>                            <span class="token comment">// 16</span>
</code></pre>
<p><code>arr</code> is a typed array of 16-bit unsigned integers mapped over the 256-bit <code>buf</code> buffer, meaning you get 16 elements.</p>
<h3 id="endianness"><a name="endianness" class="anchor-navigation-ex-anchor" href="#endianness"><i class="fa fa-link" aria-hidden="true"></i></a>2.1.1. Endianness</h3>
<p>It&apos;s very important to understand that the <code>arr</code> is mapped using the endian-setting (big-endian or little-endian) of the platform the JS is running on. This can be an issue if the binary data is created with one endianness but interpreted on a platform with the opposite endianness.</p>
<p>Endian means if the low-order byte (collection of 8-bits) of a multi-byte number -- such as the 16-bit unsigned ints we created in the earlier snippet -- is on the right or the left of the number&apos;s bytes.</p>
<p>For example, let&apos;s imagine the base-10 number <code>3085</code>, which takes 16-bits to represent. If you have just one 16-bit number container, it&apos;d be represented in binary as <code>0000110000001101</code> (hexadecimal <code>0c0d</code>) regardless of endianness.</p>
<p>But if <code>3085</code> was represented with two 8-bit numbers, the endianness would significantly affect its storage in memory:</p>
<ul>
<li><code>0000110000001101</code> / <code>0c0d</code> (big endian)</li>
<li><code>0000110100001100</code> / <code>0d0c</code> (little endian)</li>
</ul>
<p>If you received the bits of <code>3085</code> as <code>0000110100001100</code> from a little-endian system, but you layered a view on top of it in a big-endian system, you&apos;d instead see value <code>3340</code> (base-10) and <code>0d0c</code> (base-16).</p>
<p>Little endian is the most common representation on the web these days, but there are definitely browsers where that&apos;s not true. It&apos;s important that you understand the endianness of both the producer and consumer of a chunk of binary data.</p>
<p>From MDN, here&apos;s a quick way to test the endianness of your JavaScript:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> littleEndian <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">DataView</span><span class="token punctuation">(</span> buffer <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setInt16</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Int16Array</span><span class="token punctuation">(</span> buffer <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">256</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>littleEndian</code> will be <code>true</code> or <code>false</code>; for most browsers, it should return <code>true</code>. This test uses <code>DataView(..)</code>, which allows more low-level, fine-grained control over accessing (setting/getting) the bits from the view you layer over the buffer. The third parameter of the <code>setInt16(..)</code> method in the previous snippet is for telling the <code>DataView</code> what endianness you&apos;re wanting it to use for that operation.</p>
<p><strong>Warning:</strong> Do not confuse endianness of underlying binary storage in array buffers with how a given number is represented when exposed in a JS program. For example, <code>(3085).toString(2)</code> returns <code>&quot;110000001101&quot;</code>, which with an assumed leading four <code>&quot;0&quot;</code>s appears to be the big-endian representation. In fact, this representation is based on a single 16-bit view, not a view of two 8-bit bytes. The <code>DataView</code> test above is the best way to determine endianness for your JS environment.</p>
<h3 id="multiple-views"><a name="multiple-views" class="anchor-navigation-ex-anchor" href="#multiple-views"><i class="fa fa-link" aria-hidden="true"></i></a>2.1.2. Multiple Views</h3>
<p>A single buffer can have multiple views attached to it, such as:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> view8 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span> buf <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> view16 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint16Array</span><span class="token punctuation">(</span> buf <span class="token punctuation">)</span><span class="token punctuation">;</span>

view16<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3085</span><span class="token punctuation">;</span>
view8<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                        <span class="token comment">// 13</span>
view8<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                        <span class="token comment">// 12</span>

view8<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span> <span class="token number">16</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// &quot;d&quot;</span>
view8<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span> <span class="token number">16</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// &quot;c&quot;</span>

<span class="token comment">// swap (as if endian!)</span>
<span class="token keyword">var</span> tmp <span class="token operator">=</span> view8<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
view8<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> view8<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
view8<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>

view16<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                        <span class="token comment">// 3340</span>
</code></pre>
<p>The typed array constructors have multiple signature variations. We&apos;ve shown so far only passing them an existing buffer. However, that form also takes two extra parameters: <code>byteOffset</code> and <code>length</code>. In other words, you can start the typed array view at a location other than <code>0</code> and you can make it span less than the full length of the buffer.</p>
<p>If the buffer of binary data includes data in non-uniform size/location, this technique can be quite useful.</p>
<p>For example, consider a binary buffer that has a 2-byte number (aka &quot;word&quot;) at the beginning, followed by two 1-byte numbers, followed by a 32-bit floating point number. Here&apos;s how you can access that data with multiple views on the same buffer, offsets, and lengths:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> first <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint16Array</span><span class="token punctuation">(</span> buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    second <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span> buf<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    third <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span> buf<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    fourth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span> buf<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="typedarray-constructors"><a name="typedarray-constructors" class="anchor-navigation-ex-anchor" href="#typedarray-constructors"><i class="fa fa-link" aria-hidden="true"></i></a>2.1.3. TypedArray Constructors</h3>
<p>In addition to the <code>(buffer,[offset, [length]])</code> form examined in the previous section, typed array constructors also support these forms:</p>
<ul>
<li>[constructor]<code>(length)</code>: Creates a new view over a new buffer of <code>length</code> bytes</li>
<li>[constructor]<code>(typedArr)</code>: Creates a new view and buffer, and copies the contents from the <code>typedArr</code> view</li>
<li>[constructor]<code>(obj)</code>: Creates a new view and buffer, and iterates over the array-like or object <code>obj</code> to copy its contents</li>
</ul>
<p>The following typed array constructors are available as of ES6:</p>
<ul>
<li><code>Int8Array</code> (8-bit signed integers), <code>Uint8Array</code> (8-bit unsigned integers)<ul>
<li><code>Uint8ClampedArray</code> (8-bit unsigned integers, each value clamped on setting to the <code>0</code>-<code>255</code> range)</li>
</ul>
</li>
<li><code>Int16Array</code> (16-bit signed integers), <code>Uint16Array</code> (16-bit unsigned integers)</li>
<li><code>Int32Array</code> (32-bit signed integers), <code>Uint32Array</code> (32-bit unsigned integers)</li>
<li><code>Float32Array</code> (32-bit floating point, IEEE-754)</li>
<li><code>Float64Array</code> (64-bit floating point, IEEE-754)</li>
</ul>
<p>Instances of typed array constructors are almost the same as regular native arrays. Some differences include having a fixed length and the values all being of the same &quot;type.&quot;</p>
<p>However, they share most of the same <code>prototype</code> methods. As such, you likely will be able to use them as regular arrays without needing to convert.</p>
<p>For example:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Int32Array</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>

a<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> v <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 10 20 30</span>

a<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> <span class="token string">&quot;-&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;10-20-30&quot;</span>
</code></pre>
<p><strong>Warning:</strong> You can&apos;t use certain <code>Array.prototype</code> methods with TypedArrays that don&apos;t make sense, such as the mutators (<code>splice(..)</code>, <code>push(..)</code>, etc.) and <code>concat(..)</code>.</p>
<p>Be aware that the elements in TypedArrays really are constrained to the declared bit sizes. If you have a <code>Uint8Array</code> and try to assign something larger than an 8-bit value into one of its elements, the value wraps around so as to stay within the bit length.</p>
<p>This could cause problems if you were trying to, for instance, square all the values in a TypedArray. Consider:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> v <span class="token operator">*</span> v<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

b<span class="token punctuation">;</span>                <span class="token comment">// [100, 144, 132]</span>
</code></pre>
<p>The <code>20</code> and <code>30</code> values, when squared, resulted in bit overflow. To get around such a limitation, you can use the <code>TypedArray#from(..)</code> function:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> Uint16Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> v <span class="token operator">*</span> v<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

b<span class="token punctuation">;</span>                <span class="token comment">// [100, 400, 900]</span>
</code></pre>
<p>See the &quot;<code>Array.from(..)</code> Static Function&quot; section in Chapter 6 for more information about the <code>Array.from(..)</code> that is shared with TypedArrays. Specifically, the &quot;Mapping&quot; section explains the mapping function accepted as its second argument.</p>
<p>One interesting behavior to consider is that TypedArrays have a <code>sort(..)</code> method much like regular arrays, but this one defaults to numeric sort comparisons instead of coercing values to strings for lexicographic comparison. For example:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                <span class="token comment">// [1,10,2]</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                <span class="token comment">// [1,2,10]</span>
</code></pre>
<p>The <code>TypedArray#sort(..)</code> takes an optional compare function argument just like <code>Array#sort(..)</code>, which works in exactly the same way.</p>
<h2 id="maps"><a name="maps" class="anchor-navigation-ex-anchor" href="#maps"><i class="fa fa-link" aria-hidden="true"></i></a>2.2. Maps</h2>
<p>If you have a lot of JS experience, you know that objects are the primary mechanism for creating unordered key/value-pair data structures, otherwise known as maps. However, the major drawback with objects-as-maps is the inability to use a non-string value as the key.</p>
<p>For example, consider:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

m<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
m<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">;</span>

m<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>                            <span class="token comment">// &quot;bar&quot;</span>
m<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>                            <span class="token comment">// &quot;bar&quot;</span>
</code></pre>
<p>What&apos;s going on here? The two objects <code>x</code> and <code>y</code> both stringify to <code>&quot;[object Object]&quot;</code>, so only that one key is being set in <code>m</code>.</p>
<p>Some have implemented fake maps by maintaining a parallel array of non-string keys alongside an array of the values, such as:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> vals <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>
vals<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
vals<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

keys<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> x<span class="token punctuation">;</span>                    <span class="token comment">// true</span>
vals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                        <span class="token comment">// &quot;foo&quot;</span>

keys<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> y<span class="token punctuation">;</span>                    <span class="token comment">// true</span>
vals<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                        <span class="token comment">// &quot;bar&quot;</span>
</code></pre>
<p>Of course, you wouldn&apos;t want to manage those parallel arrays yourself, so you could define a data structure with methods that automatically do the management under the covers. Besides having to do that work yourself, the main drawback is that access is no longer O(1) time-complexity, but instead is O(n).</p>
<p>But as of ES6, there&apos;s no longer any need to do this! Just use <code>Map(..)</code>:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> y<span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// &quot;foo&quot;</span>
m<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// &quot;bar&quot;</span>
</code></pre>
<p>The only drawback is that you can&apos;t use the <code>[ ]</code> bracket access syntax for setting and retrieving values. But <code>get(..)</code> and <code>set(..)</code> work perfectly suitably instead.</p>
<p>To delete an element from a map, don&apos;t use the <code>delete</code> operator, but instead use the <code>delete(..)</code> method:</p>
<pre class="language-"><code class="lang-js">m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> y<span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>You can clear the entire map&apos;s contents with <code>clear()</code>. To get the length of a map (i.e., the number of keys), use the <code>size</code> property (not <code>length</code>):</p>
<pre class="language-"><code class="lang-js">m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> y<span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span>size<span class="token punctuation">;</span>                            <span class="token comment">// 2</span>

m<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span>size<span class="token punctuation">;</span>                            <span class="token comment">// 0</span>
</code></pre>
<p>The <code>Map(..)</code> constructor can also receive an iterable (see &quot;Iterators&quot; in Chapter 3), which must produce a list of arrays, where the first item in each array is the key and the second item is the value. This format for iteration is identical to that produced by the <code>entries()</code> method, explained in the next section. That makes it easy to make a copy of a map:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> m2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span> m<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// same as:</span>
<span class="token keyword">var</span> m2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span> m <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Because a map instance is an iterable, and its default iterator is the same as <code>entries()</code>, the second shorter form is more preferable.</p>
<p>Of course, you can just manually specify an <em>entries</em> list (array of key/value arrays) in the <code>Map(..)</code> constructor form:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span> x<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span> y<span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">]</span>
<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// &quot;foo&quot;</span>
m<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// &quot;bar&quot;</span>
</code></pre>
<h3 id="map-values"><a name="map-values" class="anchor-navigation-ex-anchor" href="#map-values"><i class="fa fa-link" aria-hidden="true"></i></a>2.2.1. Map Values</h3>
<p>To get the list of values from a map, use <code>values(..)</code>, which returns an iterator. In Chapters 2 and 3, we covered various ways to process an iterator sequentially (like an array), such as the <code>...</code> spread operator and the <code>for..of</code> loop. Also, &quot;Arrays&quot; in Chapter 6 covers the <code>Array.from(..)</code> method in detail. Consider:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> y<span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> vals <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">...</span>m<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

vals<span class="token punctuation">;</span>                            <span class="token comment">// [&quot;foo&quot;,&quot;bar&quot;]</span>
Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span> m<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// [&quot;foo&quot;,&quot;bar&quot;]</span>
</code></pre>
<p>As discussed in the previous section, you can iterate over a map&apos;s entries using <code>entries()</code> (or the default map iterator). Consider:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> y<span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> vals <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">...</span>m<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

vals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> x<span class="token punctuation">;</span>                <span class="token comment">// true</span>
vals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                        <span class="token comment">// &quot;foo&quot;</span>

vals<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> y<span class="token punctuation">;</span>                <span class="token comment">// true</span>
vals<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                        <span class="token comment">// &quot;bar&quot;</span>
</code></pre>
<h3 id="map-keys"><a name="map-keys" class="anchor-navigation-ex-anchor" href="#map-keys"><i class="fa fa-link" aria-hidden="true"></i></a>2.2.2. Map Keys</h3>
<p>To get the list of keys, use <code>keys()</code>, which returns an iterator over the keys in the map:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> y<span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> keys <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">...</span>m<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

keys<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> x<span class="token punctuation">;</span>                    <span class="token comment">// true</span>
keys<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> y<span class="token punctuation">;</span>                    <span class="token comment">// true</span>
</code></pre>
<p>To determine if a map has a given key, use <code>has(..)</code>:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// true</span>
m<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// false</span>
</code></pre>
<p>Maps essentially let you associate some extra piece of information (the value) with an object (the key) without actually putting that information on the object itself.</p>
<p>While you can use any kind of value as a key for a map, you typically will use objects, as strings and other primitives are already eligible as keys of normal objects. In other words, you&apos;ll probably want to continue to use normal objects for maps unless some or all of the keys need to be objects, in which case map is more appropriate.</p>
<p><strong>Warning:</strong> If you use an object as a map key and that object is later discarded (all references unset) in attempt to have garbage collection (GC) reclaim its memory, the map itself will still retain its entry. You will need to remove the entry from the map for it to be GC-eligible. In the next section, we&apos;ll see WeakMaps as a better option for object keys and GC.</p>
<h2 id="weakmaps"><a name="weakmaps" class="anchor-navigation-ex-anchor" href="#weakmaps"><i class="fa fa-link" aria-hidden="true"></i></a>2.3. WeakMaps</h2>
<p>WeakMaps are a variation on maps, which has most of the same external behavior but differs underneath in how the memory allocation (specifically its GC) works.</p>
<p>WeakMaps take (only) objects as keys. Those objects are held <em>weakly</em>, which means if the object itself is GC&apos;d, the entry in the WeakMap is also removed. This isn&apos;t observable behavior, though, as the only way an object can be GC&apos;d is if there&apos;s no more references to it -- once there are no more references to it, you have no object reference to check if it exists in the WeakMap.</p>
<p>Otherwise, the API for WeakMap is similar, though more limited:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// true</span>
m<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// false</span>
</code></pre>
<p>WeakMaps do not have a <code>size</code> property or <code>clear()</code> method, nor do they expose any iterators over their keys, values, or entries. So even if you unset the <code>x</code> reference, which will remove its entry from <code>m</code> upon GC, there is no way to tell. You&apos;ll just have to take JavaScript&apos;s word for it!</p>
<p>Just like Maps, WeakMaps let you soft-associate information with an object. But they are particularly useful if the object is not one you completely control, such as a DOM element. If the object you&apos;re using as a map key can be deleted and should be GC-eligible when it is, then a WeakMap is a more appropriate option.</p>
<p>It&apos;s important to note that a WeakMap only holds its <em>keys</em> weakly, not its values. Consider:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    z <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    w <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>

x <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                        <span class="token comment">// { id: 1 } is GC-eligible</span>
y <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                        <span class="token comment">// { id: 2 } is GC-eligible</span>
                                <span class="token comment">// only because { id: 1 } is</span>

m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> z<span class="token punctuation">,</span> w <span class="token punctuation">)</span><span class="token punctuation">;</span>

w <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                        <span class="token comment">// { id: 4 } is not GC-eligible</span>
</code></pre>
<p>For this reason, WeakMaps are in my opinion better named &quot;WeakKeyMaps.&quot;</p>
<h2 id="sets"><a name="sets" class="anchor-navigation-ex-anchor" href="#sets"><i class="fa fa-link" aria-hidden="true"></i></a>2.4. Sets</h2>
<p>A set is a collection of unique values (duplicates are ignored).</p>
<p>The API for a set is similar to map. The <code>add(..)</code> method takes the place of the <code>set(..)</code> method (somewhat ironically), and there is no <code>get(..)</code> method.</p>
<p>Consider:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>                            <span class="token comment">// 2</span>

s<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>                            <span class="token comment">// 1</span>

s<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>                            <span class="token comment">// 0</span>
</code></pre>
<p>The <code>Set(..)</code> constructor form is similar to <code>Map(..)</code>, in that it can receive an iterable, like another set or simply an array of values. However, unlike how <code>Map(..)</code> expects <em>entries</em> list (array of key/value arrays), <code>Set(..)</code> expects a <em>values</em> list (array of values):</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>A set doesn&apos;t need a <code>get(..)</code> because you don&apos;t retrieve a value from a set, but rather test if it is present or not, using <code>has(..)</code>:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// true</span>
s<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// false</span>
</code></pre>
<p><strong>Note:</strong> The comparison algorithm in <code>has(..)</code> is almost identical to <code>Object.is(..)</code> (see Chapter 6), except that <code>-0</code> and <code>0</code> are treated as the same rather than distinct.</p>
<h3 id="set-iterators"><a name="set-iterators" class="anchor-navigation-ex-anchor" href="#set-iterators"><i class="fa fa-link" aria-hidden="true"></i></a>2.4.1. Set Iterators</h3>
<p>Sets have the same iterator methods as maps. Their behavior is different for sets, but symmetric with the behavior of map iterators. Consider:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> x <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> keys <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">...</span>s<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    vals <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">...</span>s<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    entries <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">...</span>s<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

keys<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> x<span class="token punctuation">;</span>
keys<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> y<span class="token punctuation">;</span>

vals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> x<span class="token punctuation">;</span>
vals<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> y<span class="token punctuation">;</span>

entries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> x<span class="token punctuation">;</span>
entries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> x<span class="token punctuation">;</span>
entries<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> y<span class="token punctuation">;</span>
entries<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> y<span class="token punctuation">;</span>
</code></pre>
<p>The <code>keys()</code> and <code>values()</code> iterators both yield a list of the unique values in the set. The <code>entries()</code> iterator yields a list of entry arrays, where both items of the array are the unique set value. The default iterator for a set is its <code>values()</code> iterator.</p>
<p>The inherent uniqueness of a set is its most useful trait. For example:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    uniques <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">...</span>s <span class="token punctuation">]</span><span class="token punctuation">;</span>

uniques<span class="token punctuation">;</span>                        <span class="token comment">// [1,2,3,4,&quot;1&quot;,&quot;5&quot;]</span>
</code></pre>
<p>Set uniqueness does not allow coercion, so <code>1</code> and <code>&quot;1&quot;</code> are considered distinct values.</p>
<h2 id="weaksets"><a name="weaksets" class="anchor-navigation-ex-anchor" href="#weaksets"><i class="fa fa-link" aria-hidden="true"></i></a>2.5. WeakSets</h2>
<p>Whereas a WeakMap holds its keys weakly (but its values strongly), a WeakSet holds its values weakly (there aren&apos;t really keys).</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>

x <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                        <span class="token comment">// `x` is GC-eligible</span>
y <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                        <span class="token comment">// `y` is GC-eligible</span>
</code></pre>
<p><strong>Warning:</strong> WeakSet values must be objects, not primitive values as is allowed with sets.</p>
<h2 id="review"><a name="review" class="anchor-navigation-ex-anchor" href="#review"><i class="fa fa-link" aria-hidden="true"></i></a>2.6. Review</h2>
<p>ES6 defines a number of useful collections that make working with data in structured ways more efficient and effective.</p>
<p>TypedArrays provide &quot;view&quot;s of binary data buffers that align with various integer types, like 8-bit unsigned integers and 32-bit floats. The array access to binary data makes operations much easier to express and maintain, which enables you to more easily work with complex data like video, audio, canvas data, and so on.</p>
<p>Maps are key-value pairs where the key can be an object instead of just a string/primitive. Sets are unique lists of values (of any type).</p>
<p>WeakMaps are maps where the key (object) is weakly held, so that GC is free to collect the entry if it&apos;s the last reference to an object. WeakSets are sets where the value is weakly held, again so that GC can remove the entry if it&apos;s the last reference to that object.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ch4.html" class="navigation navigation-prev " aria-label="Previous page: Chapter 4: Async Flow Control">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="ch6.html" class="navigation navigation-next " aria-label="Next page: Chapter 6: API Additions">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Chapter 5: Collections","level":"1.8.6","depth":2,"next":{"title":"Chapter 6: API Additions","level":"1.8.7","depth":2,"path":"ES6 & Beyond/ch6.md","ref":"ES6 & Beyond/ch6.md","articles":[]},"previous":{"title":"Chapter 4: Async Flow Control","level":"1.8.5","depth":2,"path":"ES6 & Beyond/ch4.md","ref":"ES6 & Beyond/ch4.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["-lunr","-sharing","-livereload","-search","search-plus","anchor-navigation-ex","splitter","prism","theme-comscore","livereload"],"pluginsConfig":{"anchor-navigation-ex":{"associatedWithSummary":false,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"prism":{"css":["prismjs/themes/prism-okaidia.css"]},"search-plus":{},"splitter":{},"highlight":{},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-comscore":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"ES6 & Beyond/ch5.md","mtime":"2018-09-23T00:16:07.281Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-09-23T02:41:01.827Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

