
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Chapter 1: this Or That? Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="ch2.html" />
    
    
    <link rel="prev" href="foreword.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../preface.html">
            
                <a href="../preface.html">
            
                    
                    Preface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../up & going/toc.html">
            
                <a href="../up & going/toc.html">
            
                    
                    Up & Going
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../up & going/foreword.html">
            
                <a href="../up & going/foreword.html">
            
                    
                    Foreword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../up & going/ch1.html">
            
                <a href="../up & going/ch1.html">
            
                    
                    Chapter 1: Into Programming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../up & going/ch2.html">
            
                <a href="../up & going/ch2.html">
            
                    
                    Chapter 2: Into JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../up & going/ch3.html">
            
                <a href="../up & going/ch3.html">
            
                    
                    Chapter 3: Into YDKJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../up & going/apA.html">
            
                <a href="../up & going/apA.html">
            
                    
                    Appendix A: Thank You's!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../Scope & Closures/toc.html">
            
                <a href="../Scope & Closures/toc.html">
            
                    
                    Scope & Closures
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../Scope & Closures/ch1.html">
            
                <a href="../Scope & Closures/ch1.html">
            
                    
                    Chapter 1: What is Scope?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../Scope & Closures/ch2.html">
            
                <a href="../Scope & Closures/ch2.html">
            
                    
                    Chapter 2: Lexical Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../Scope & Closures/ch3.html">
            
                <a href="../Scope & Closures/ch3.html">
            
                    
                    Chapter 3: Function vs. Block Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../Scope & Closures/ch4.html">
            
                <a href="../Scope & Closures/ch4.html">
            
                    
                    Chapter 4: Hoisting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../Scope & Closures/ch5.html">
            
                <a href="../Scope & Closures/ch5.html">
            
                    
                    Chapter 5: Scope Closures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../Scope & Closures/apA.html">
            
                <a href="../Scope & Closures/apA.html">
            
                    
                    Appendix A: Dynamic Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../Scope & Closures/apB.html">
            
                <a href="../Scope & Closures/apB.html">
            
                    
                    Appendix B: Polyfilling Block Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../Scope & Closures/apC.html">
            
                <a href="../Scope & Closures/apC.html">
            
                    
                    Appendix C: Lexical-this
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../Scope & Closures/apD.html">
            
                <a href="../Scope & Closures/apD.html">
            
                    
                    Appendix D: Thank You's!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="toc.html">
            
                <a href="toc.html">
            
                    
                    this & Object Prototypes
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="foreword.html">
            
                <a href="foreword.html">
            
                    
                    Foreword
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.2" data-path="ch1.html">
            
                <a href="ch1.html">
            
                    
                    Chapter 1: this Or That?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="ch2.html">
            
                <a href="ch2.html">
            
                    
                    Chapter 2: this All Makes Sense Now!
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="ch3.html">
            
                <a href="ch3.html">
            
                    
                    Chapter 3: Objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="ch4.html">
            
                <a href="ch4.html">
            
                    
                    Chapter 4: Mixing (Up) "Class" Objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="ch5.html">
            
                <a href="ch5.html">
            
                    
                    Chapter 5: Prototypes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="ch6.html">
            
                <a href="ch6.html">
            
                    
                    Chapter 6: Behavior Delegation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="apA.html">
            
                <a href="apA.html">
            
                    
                    Appendix A: ES6 class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="apB.html">
            
                <a href="apB.html">
            
                    
                    Appendix B: Thank You's!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../Types & Grammar/toc.html">
            
                <a href="../Types & Grammar/toc.html">
            
                    
                    Types & Grammar
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../Types & Grammar/foreword.html">
            
                <a href="../Types & Grammar/foreword.html">
            
                    
                    Foreword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../Types & Grammar/ch1.html">
            
                <a href="../Types & Grammar/ch1.html">
            
                    
                    Chapter 1: Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../Types & Grammar/ch2.html">
            
                <a href="../Types & Grammar/ch2.html">
            
                    
                    Chapter 2: Values
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../Types & Grammar/ch3.html">
            
                <a href="../Types & Grammar/ch3.html">
            
                    
                    Chapter 3: Natives
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../Types & Grammar/ch4.html">
            
                <a href="../Types & Grammar/ch4.html">
            
                    
                    Chapter 4: Coercion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../Types & Grammar/ch5.html">
            
                <a href="../Types & Grammar/ch5.html">
            
                    
                    Chapter 5: Grammar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../Types & Grammar/apA.html">
            
                <a href="../Types & Grammar/apA.html">
            
                    
                    Appendix A: Mixed Environment JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../Types & Grammar/apB.html">
            
                <a href="../Types & Grammar/apB.html">
            
                    
                    Appendix B: Thank You's!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../Async & Performance/toc.html">
            
                <a href="../Async & Performance/toc.html">
            
                    
                    Async & Performance
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../Async & Performance/foreword.html">
            
                <a href="../Async & Performance/foreword.html">
            
                    
                    Foreword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../Async & Performance/ch1.html">
            
                <a href="../Async & Performance/ch1.html">
            
                    
                    Chapter 1: Asynchrony: Now & Later
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../Async & Performance/ch2.html">
            
                <a href="../Async & Performance/ch2.html">
            
                    
                    Chapter 2: Callbacks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../Async & Performance/ch3.html">
            
                <a href="../Async & Performance/ch3.html">
            
                    
                    Chapter 3: Promises
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../Async & Performance/ch4.html">
            
                <a href="../Async & Performance/ch4.html">
            
                    
                    Chapter 4: Generators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../Async & Performance/ch5.html">
            
                <a href="../Async & Performance/ch5.html">
            
                    
                    Chapter 5: Program Performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../Async & Performance/ch6.html">
            
                <a href="../Async & Performance/ch6.html">
            
                    
                    Chapter 6: Benchmarking & Tuning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="../Async & Performance/apA.html">
            
                <a href="../Async & Performance/apA.html">
            
                    
                    Appendix A: Library: asynquence
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="../Async & Performance/apB.html">
            
                <a href="../Async & Performance/apB.html">
            
                    
                    Appendix B: Advanced Async Patterns
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.10" data-path="../Async & Performance/apC.html">
            
                <a href="../Async & Performance/apC.html">
            
                    
                    Appendix C: Thank You's!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../ES6 & Beyond/toc.html">
            
                <a href="../ES6 & Beyond/toc.html">
            
                    
                    ES6 & Beyond
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../ES6 & Beyond/foreword.html">
            
                <a href="../ES6 & Beyond/foreword.html">
            
                    
                    Foreword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../ES6 & Beyond/ch1.html">
            
                <a href="../ES6 & Beyond/ch1.html">
            
                    
                    Chapter 1: ES? Now & Future
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../ES6 & Beyond/ch2.html">
            
                <a href="../ES6 & Beyond/ch2.html">
            
                    
                    Chapter 2: Syntax
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../ES6 & Beyond/ch3.html">
            
                <a href="../ES6 & Beyond/ch3.html">
            
                    
                    Chapter 3: Organization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../ES6 & Beyond/ch4.html">
            
                <a href="../ES6 & Beyond/ch4.html">
            
                    
                    Chapter 4: Async Flow Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../ES6 & Beyond/ch5.html">
            
                <a href="../ES6 & Beyond/ch5.html">
            
                    
                    Chapter 5: Collections
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="../ES6 & Beyond/ch6.html">
            
                <a href="../ES6 & Beyond/ch6.html">
            
                    
                    Chapter 6: API Additions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="../ES6 & Beyond/ch7.html">
            
                <a href="../ES6 & Beyond/ch7.html">
            
                    
                    Chapter 7: Meta Programming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="../ES6 & Beyond/ch8.html">
            
                <a href="../ES6 & Beyond/ch8.html">
            
                    
                    Chapter 8: Beyond ES6
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="../ES6 & Beyond/apA.html">
            
                <a href="../ES6 & Beyond/apA.html">
            
                    
                    Appendix A: Thank You's!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Chapter 1: this Or That?</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#you-dont-know-js-this--object-prototypes"><b>1. </b>You Don&apos;t Know JS: this &amp; Object Prototypes</a></li><li><span class="title-icon "></span><a href="#chapter-1-this-or-that"><b>2. </b>Chapter 1: this Or That?</a></li><ul><li><span class="title-icon "></span><a href="#why-this"><b>2.1. </b>Why this?</a></li><li><span class="title-icon "></span><a href="#confusions"><b>2.2. </b>Confusions</a></li><ul><li><span class="title-icon "></span><a href="#itself"><b>2.2.1. </b>Itself</a></li><li><span class="title-icon "></span><a href="#its-scope"><b>2.2.2. </b>Its Scope</a></li></ul><li><span class="title-icon "></span><a href="#whats-this"><b>2.3. </b>What&apos;s this?</a></li><li><span class="title-icon "></span><a href="#review-tldr"><b>2.4. </b>Review (TL;DR)</a></li></ul></ul></div><a href="#you-dont-know-js-this--object-prototypes" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="you-dont-know-js-this--object-prototypes"><a name="you-dont-know-js-this--object-prototypes" class="anchor-navigation-ex-anchor" href="#you-dont-know-js-this--object-prototypes"><i class="fa fa-link" aria-hidden="true"></i></a>1. You Don&apos;t Know JS: this &amp; Object Prototypes</h1>
<h1 id="chapter-1-this-or-that"><a name="chapter-1-this-or-that" class="anchor-navigation-ex-anchor" href="#chapter-1-this-or-that"><i class="fa fa-link" aria-hidden="true"></i></a>2. Chapter 1: this Or That?</h1>
<p>One of the most confused mechanisms in JavaScript is the <code>this</code> keyword. It&apos;s a special identifier keyword that&apos;s automatically defined in the scope of every function, but what exactly it refers to bedevils even seasoned JavaScript developers.</p>
<blockquote>
<p>Any sufficiently <em>advanced</em> technology is indistinguishable from magic. -- Arthur C. Clarke</p>
</blockquote>
<p>JavaScript&apos;s <code>this</code> mechanism isn&apos;t actually <em>that</em> advanced, but developers often paraphrase that quote in their own mind by inserting &quot;complex&quot; or &quot;confusing&quot;, and there&apos;s no question that without lack of clear understanding, <code>this</code> can seem downright magical in <em>your</em> confusion.</p>
<p><strong>Note:</strong> The word &quot;this&quot; is a terribly common pronoun in general discourse. So, it can be very difficult, especially verbally, to determine whether we are using &quot;this&quot; as a pronoun or using it to refer to the actual keyword identifier. For clarity, I will always use <code>this</code> to refer to the special keyword, and &quot;this&quot; or <em>this</em> or this otherwise.</p>
<h2 id="why-this"><a name="why-this" class="anchor-navigation-ex-anchor" href="#why-this"><i class="fa fa-link" aria-hidden="true"></i></a>2.1. Why this?</h2>
<p>If the <code>this</code> mechanism is so confusing, even to seasoned JavaScript developers, one may wonder why it&apos;s even useful? Is it more trouble than it&apos;s worth? Before we jump into the <em>how</em>, we should examine the <em>why</em>.</p>
<p>Let&apos;s try to illustrate the motivation and utility of <code>this</code>:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">identify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> greeting <span class="token operator">=</span> <span class="token string">&quot;Hello, I&apos;m &quot;</span> <span class="token operator">+</span> identify<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> greeting <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;Kyle&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> you <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;Reader&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

identify<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> me <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// KYLE</span>
identify<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> you <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// READER</span>

speak<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> me <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, I&apos;m KYLE</span>
speak<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> you <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, I&apos;m READER</span>
</code></pre>
<p>If the <em>how</em> of this snippet confuses you, don&apos;t worry! We&apos;ll get to that shortly. Just set those questions aside briefly so we can look into the <em>why</em> more clearly.</p>
<p>This code snippet allows the <code>identify()</code> and <code>speak()</code> functions to be re-used against multiple <em>context</em> (<code>me</code> and <code>you</code>) objects, rather than needing a separate version of the function for each object.</p>
<p>Instead of relying on <code>this</code>, you could have explicitly passed in a context object to both <code>identify()</code> and <code>speak()</code>.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">identify</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> context<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">speak</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> greeting <span class="token operator">=</span> <span class="token string">&quot;Hello, I&apos;m &quot;</span> <span class="token operator">+</span> <span class="token function">identify</span><span class="token punctuation">(</span> context <span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> greeting <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">identify</span><span class="token punctuation">(</span> you <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// READER</span>
<span class="token function">speak</span><span class="token punctuation">(</span> me <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, I&apos;m KYLE</span>
</code></pre>
<p>However, the <code>this</code> mechanism provides a more elegant way of implicitly &quot;passing along&quot; an object reference, leading to cleaner API design and easier re-use.</p>
<p>The more complex your usage pattern is, the more clearly you&apos;ll see that passing context around as an explicit parameter is often messier than passing around a <code>this</code> context. When we explore objects and prototypes, you will see the helpfulness of a collection of functions being able to automatically reference the proper context object.</p>
<h2 id="confusions"><a name="confusions" class="anchor-navigation-ex-anchor" href="#confusions"><i class="fa fa-link" aria-hidden="true"></i></a>2.2. Confusions</h2>
<p>We&apos;ll soon begin to explain how <code>this</code> <em>actually</em> works, but first we must  dispel some misconceptions about how it <em>doesn&apos;t</em> actually work.</p>
<p>The name &quot;this&quot; creates confusion when developers try to think about it too literally. There are two meanings often assumed, but both are incorrect.</p>
<h3 id="itself"><a name="itself" class="anchor-navigation-ex-anchor" href="#itself"><i class="fa fa-link" aria-hidden="true"></i></a>2.2.1. Itself</h3>
<p>The first common temptation is to assume <code>this</code> refers to the function itself. That&apos;s a reasonable grammatical inference, at least.</p>
<p>Why would you want to refer to a function from inside itself? The most common reasons would be things like recursion (calling a function from inside itself) or having an event handler that can unbind itself when it&apos;s first called.</p>
<p>Developers new to JS&apos;s mechanisms often think that referencing the function as an object (all functions in JavaScript are objects!) lets you store <em>state</em> (values in properties) between function calls. While this is certainly possible and has some limited uses, the rest of the book will expound on many other patterns for <em>better</em> places to store state besides the function object.</p>
<p>But for just a moment, we&apos;ll explore that pattern, to illustrate how <code>this</code> doesn&apos;t let a function get a reference to itself like we might have assumed.</p>
<p>Consider the following code, where we attempt to track how many times a function (<code>foo</code>) was called:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;foo: &quot;</span> <span class="token operator">+</span> num <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// keep track of how many times `foo` is called</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

foo<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> i<span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">foo</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// foo: 6</span>
<span class="token comment">// foo: 7</span>
<span class="token comment">// foo: 8</span>
<span class="token comment">// foo: 9</span>

<span class="token comment">// how many times was `foo` called?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> foo<span class="token punctuation">.</span>count <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 -- WTF?</span>
</code></pre>
<p><code>foo.count</code> is <em>still</em> <code>0</code>, even though the four <code>console.log</code> statements clearly indicate <code>foo(..)</code> was in fact called four times. The frustration stems from a <em>too literal</em> interpretation of what <code>this</code> (in <code>this.count++</code>) means.</p>
<p>When the code executes <code>foo.count = 0</code>, indeed it&apos;s adding a property <code>count</code> to the function object <code>foo</code>. But for the <code>this.count</code> reference inside of the function, <code>this</code> is not in fact pointing <em>at all</em> to that function object, and so even though the property names are the same, the root objects are different, and confusion ensues.</p>
<p><strong>Note:</strong> A responsible developer <em>should</em> ask at this point, &quot;If I was incrementing a <code>count</code> property but it wasn&apos;t the one I expected, which <code>count</code> <em>was</em> I incrementing?&quot; In fact, were she to dig deeper, she would find that she had accidentally created a global variable <code>count</code> (see Chapter 2 for <em>how</em> that happened!), and it currently has the value <code>NaN</code>. Of course, once she identifies this peculiar outcome, she then has a whole other set of questions: &quot;How was it global, and why did it end up <code>NaN</code> instead of some proper count value?&quot; (see Chapter 2).</p>
<p>Instead of stopping at this point and digging into why the <code>this</code> reference doesn&apos;t seem to be behaving as <em>expected</em>, and answering those tough but important questions, many developers simply avoid the issue altogether, and hack toward some other solution, such as creating another object to hold the <code>count</code> property:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;foo: &quot;</span> <span class="token operator">+</span> num <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// keep track of how many times `foo` is called</span>
    data<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> i<span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">foo</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// foo: 6</span>
<span class="token comment">// foo: 7</span>
<span class="token comment">// foo: 8</span>
<span class="token comment">// foo: 9</span>

<span class="token comment">// how many times was `foo` called?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> data<span class="token punctuation">.</span>count <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
</code></pre>
<p>While it is true that this approach &quot;solves&quot; the problem, unfortunately it simply ignores the real problem -- lack of understanding what <code>this</code> means and how it works -- and instead falls back to the comfort zone of a more familiar mechanism: lexical scope.</p>
<p><strong>Note:</strong> Lexical scope is a perfectly fine and useful mechanism; I am not belittling the use of it, by any means (see <em>&quot;Scope &amp; Closures&quot;</em> title of this book series). But constantly <em>guessing</em> at how to use <code>this</code>, and usually being <em>wrong</em>, is not a good reason to retreat back to lexical scope and never learn <em>why</em> <code>this</code> eludes you.</p>
<p>To reference a function object from inside itself, <code>this</code> by itself will typically be insufficient. You generally need a reference to the function object via a lexical identifier (variable) that points at it.</p>
<p>Consider these two functions:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// `foo` refers to itself</span>
<span class="token punctuation">}</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// anonymous function (no name), cannot</span>
    <span class="token comment">// refer to itself</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>In the first function, called a &quot;named function&quot;, <code>foo</code> is a reference that can be used to refer to the function from inside itself.</p>
<p>But in the second example, the function callback passed to <code>setTimeout(..)</code> has no name identifier (so called an &quot;anonymous function&quot;), so there&apos;s no proper way to refer to the function object itself.</p>
<p><strong>Note:</strong> The old-school but now deprecated and frowned-upon <code>arguments.callee</code> reference inside a function <em>also</em> points to the function object of the currently executing function. This reference is typically the only way to access an anonymous function&apos;s object from inside itself. The best approach, however, is to avoid the use of anonymous functions altogether, at least for those which require a self-reference, and instead use a named function (expression). <code>arguments.callee</code> is deprecated and should not be used.</p>
<p>So another solution to our running example would have been to use the <code>foo</code> identifier as a function object reference in each place, and not use <code>this</code> at all, which <em>works</em>:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;foo: &quot;</span> <span class="token operator">+</span> num <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// keep track of how many times `foo` is called</span>
    foo<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

foo<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> i<span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">foo</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// foo: 6</span>
<span class="token comment">// foo: 7</span>
<span class="token comment">// foo: 8</span>
<span class="token comment">// foo: 9</span>

<span class="token comment">// how many times was `foo` called?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> foo<span class="token punctuation">.</span>count <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
</code></pre>
<p>However, that approach similarly side-steps <em>actual</em> understanding of <code>this</code> and relies entirely on the lexical scoping of variable <code>foo</code>.</p>
<p>Yet another way of approaching the issue is to force <code>this</code> to actually point at the <code>foo</code> function object:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;foo: &quot;</span> <span class="token operator">+</span> num <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// keep track of how many times `foo` is called</span>
    <span class="token comment">// Note: `this` IS actually `foo` now, based on</span>
    <span class="token comment">// how `foo` is called (see below)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

foo<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> i<span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// using `call(..)`, we ensure the `this`</span>
        <span class="token comment">// points at the function object (`foo`) itself</span>
        foo<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> foo<span class="token punctuation">,</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// foo: 6</span>
<span class="token comment">// foo: 7</span>
<span class="token comment">// foo: 8</span>
<span class="token comment">// foo: 9</span>

<span class="token comment">// how many times was `foo` called?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> foo<span class="token punctuation">.</span>count <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
</code></pre>
<p><strong>Instead of avoiding <code>this</code>, we embrace it.</strong> We&apos;ll explain in a little bit <em>how</em> such techniques work much more completely, so don&apos;t worry if you&apos;re still a bit confused!</p>
<h3 id="its-scope"><a name="its-scope" class="anchor-navigation-ex-anchor" href="#its-scope"><i class="fa fa-link" aria-hidden="true"></i></a>2.2.2. Its Scope</h3>
<p>The next most common misconception about the meaning of <code>this</code> is that it somehow refers to the function&apos;s scope. It&apos;s a tricky question, because in one sense there is some truth, but in the other sense, it&apos;s quite misguided.</p>
<p>To be clear, <code>this</code> does not, in any way, refer to a function&apos;s <strong>lexical scope</strong>. It is true that internally, scope is kind of like an object with properties for each of the available identifiers. But the scope &quot;object&quot; is not accessible to JavaScript code. It&apos;s an inner part of the <em>Engine</em>&apos;s implementation.</p>
<p>Consider code which attempts (and fails!) to cross over the boundary and use <code>this</code> to implicitly refer to a function&apos;s lexical scope:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined</span>
</code></pre>
<p>There&apos;s more than one mistake in this snippet. While it may seem contrived, the code you see is a distillation of actual real-world code that has been exchanged in public community help forums. It&apos;s a wonderful (if not sad) illustration of just how misguided <code>this</code> assumptions can be.</p>
<p>Firstly, an attempt is made to reference the <code>bar()</code> function via <code>this.bar()</code>. It is almost certainly an <em>accident</em> that it works, but we&apos;ll explain the <em>how</em> of that shortly. The most natural way to have invoked <code>bar()</code> would have been to omit the leading <code>this.</code> and just make a lexical reference to the identifier.</p>
<p>However, the developer who writes such code is attempting to use <code>this</code> to create a bridge between the lexical scopes of <code>foo()</code> and <code>bar()</code>, so that <code>bar()</code> has access to the variable <code>a</code> in the inner scope of <code>foo()</code>. <strong>No such bridge is possible.</strong> You cannot use a <code>this</code> reference to look something up in a lexical scope. It is not possible.</p>
<p>Every time you feel yourself trying to mix lexical scope look-ups with <code>this</code>, remind yourself: <em>there is no bridge</em>.</p>
<h2 id="whats-this"><a name="whats-this" class="anchor-navigation-ex-anchor" href="#whats-this"><i class="fa fa-link" aria-hidden="true"></i></a>2.3. What&apos;s this?</h2>
<p>Having set aside various incorrect assumptions, let us now turn our attention to how the <code>this</code> mechanism really works.</p>
<p>We said earlier that <code>this</code> is not an author-time binding but a runtime binding. It is contextual based on the conditions of the function&apos;s invocation. <code>this</code> binding has nothing to do with where a function is declared, but has instead everything to do with the manner in which the function is called.</p>
<p>When a function is invoked, an activation record, otherwise known as an execution context, is created. This record contains information about where the function was called from (the call-stack), <em>how</em> the function was invoked, what parameters were passed, etc. One of the properties of this record is the <code>this</code> reference which will be used for the duration of that function&apos;s execution.</p>
<p>In the next chapter, we will learn to find a function&apos;s <strong>call-site</strong> to determine how its execution will bind <code>this</code>.</p>
<h2 id="review-tldr"><a name="review-tldr" class="anchor-navigation-ex-anchor" href="#review-tldr"><i class="fa fa-link" aria-hidden="true"></i></a>2.4. Review (TL;DR)</h2>
<p><code>this</code> binding is a constant source of confusion for the JavaScript developer who does not take the time to learn how the mechanism actually works. Guesses, trial-and-error, and blind copy-n-paste from Stack Overflow answers is not an effective or proper way to leverage <em>this</em> important <code>this</code> mechanism.</p>
<p>To learn <code>this</code>, you first have to learn what <code>this</code> is <em>not</em>, despite any assumptions or misconceptions that may lead you down those paths. <code>this</code> is neither a reference to the function itself, nor is it a reference to the function&apos;s <em>lexical</em> scope.</p>
<p><code>this</code> is actually a binding that is made when a function is invoked, and <em>what</em> it references is determined entirely by the call-site where the function is called.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="foreword.html" class="navigation navigation-prev " aria-label="Previous page: Foreword">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="ch2.html" class="navigation navigation-next " aria-label="Next page: Chapter 2: this All Makes Sense Now!">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Chapter 1: this Or That?","level":"1.5.2","depth":2,"next":{"title":"Chapter 2: this All Makes Sense Now!","level":"1.5.3","depth":2,"path":"this & Object Prototypes/ch2.md","ref":"this & Object Prototypes/ch2.md","articles":[]},"previous":{"title":"Foreword","level":"1.5.1","depth":2,"path":"this & Object Prototypes/foreword.md","ref":"this & Object Prototypes/foreword.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["-lunr","-sharing","-livereload","-search","search-plus","anchor-navigation-ex","splitter","prism","theme-comscore","livereload"],"pluginsConfig":{"anchor-navigation-ex":{"associatedWithSummary":false,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"prism":{"css":["prismjs/themes/prism-okaidia.css"]},"search-plus":{},"splitter":{},"highlight":{},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-comscore":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"this & Object Prototypes/ch1.md","mtime":"2018-09-23T00:16:07.308Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-09-23T02:41:01.827Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

